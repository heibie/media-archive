---
layout: default
title: Filme
permalink: /filme/
---

<h1>ðŸŽ¬ Filme</h1>
<p class="muted">Quelle: <code>_data/watched_movies.yml</code> â€¢ neueste zuerst</p>

<div class="controls">
  <div class="group">
    <label for="q">Suche:</label>
    <input id="q" type="search" placeholder="Titel â€¦">
  </div>
  <div class="group">
    <label for="year">Jahr:</label>
    <select id="year">
      <option value="">(alle)</option>
      {% assign years = site.data.watched_movies | map: "year" | uniq | sort %}
      {% for y in years %}{% if y %}<option value="{{ y }}">{{ y }}</option>{% endif %}{% endfor %}
    </select>
  </div>
  <span class="pill muted" id="count"></span>
</div>

<div id="movies" class="grid">
  {% assign movies = site.data.watched_movies %}
  {% for m in movies %}
  <article class="card" data-title="{{ m.title | downcase }}" data-year="{{ m.year }}" data-date="{{ m.watched_on }}">
    <img src="{{ m.poster | default: '/assets/placeholder.png' }}" alt="Poster {{ m.title | escape }}" loading="lazy">
    <div class="body">
      <div style="display:flex; justify-content:space-between; gap:.5rem;">
        <strong>{{ m.title }}</strong>
        {% if m.year %}<span class="pill">{{ m.year }}</span>{% endif %}
      </div>
      {% if m.watched_on %}<div class="muted">gesehen am {{ m.watched_on }}</div>{% endif %}
      <div class="muted">
        {% if m.imdb %}<a href="https://www.imdb.com/title/{{ m.imdb }}/" target="_blank" rel="noopener">IMDb</a>{% endif %}
        {% if m.tmdb %}{% if m.imdb %} Â· {% endif %}<a href="https://www.themoviedb.org/movie/{{ m.tmdb }}" target="_blank" rel="noopener">TMDB</a>{% endif %}
      </div>
    </div>
  </article>
  {% endfor %}
</div>

<script>
(function(){
  const q=document.getElementById('q');
  const year=document.getElementById('year');
  const cards=[...document.querySelectorAll('#movies .card')];
  const count=document.getElementById('count');

  function apply(){
    const term=(q.value||'').trim().toLowerCase();
    const y=year.value;
    let visible=0;

    // sort by watched_on desc (empty last)
    cards.sort((a,b)=>{
      const da=a.dataset.date||'', db=b.dataset.date||'';
      if(!da && !db) return 0; if(!da) return 1; if(!db) return -1;
      return db.localeCompare(da);
    }).forEach(el=>el.parentElement.appendChild(el));

    for(const el of cards){
      const hit=(!term || el.dataset.title.includes(term)) && (!y || el.dataset.year===y);
      el.style.display=hit?'':'none';
      if(hit) visible++;
    }
    count.textContent = visible + ' Filme';
  }
  q.addEventListener('input', apply);
  year.addEventListener('change', apply);
  apply();
})();
</script>
