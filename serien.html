---
layout: default
title: TV-Serien
permalink: /serien/
---

<h1>ðŸ“º TV-Serien</h1>
<p class="muted">Gruppiert nach Serie. Jede Gruppe zeigt <em>zuletzt gesehen</em> und die Anzahl der gesehenen Episoden. Per Klick alle Episoden einblenden.</p>

<div class="controls">
  <div class="group">
    <label for="q">Suche:</label>
    <input id="q" type="search" placeholder="Serien-Titel â€¦">
  </div>
  <span class="pill muted" id="count"></span>
</div>

<div id="shows">
{% assign eps = site.data.watched_episodes %}
{% assign groups = eps | group_by: "show" | sort: "name" %}
{% for g in groups %}
  {% assign list = g.items | sort: "watched_on" | reverse %}
  {% assign latest = list[0] %}
  {% assign total = g.items | size %}

  <section class="show" data-title="{{ g.name | downcase }}">
    <div class="row">
      <div>
        <img class="poster" src="{{ latest.show_poster | default: '/assets/placeholder.png' }}" alt="Poster {{ g.name | escape }}" loading="lazy">
      </div>
      <div>
        <h2 style="margin:.2rem 0 .3rem 0;">{{ g.name }}</h2>
        <div class="meta">
          {% if latest.year %}<span class="pill">{{ latest.year }}</span>{% endif %}
          <span class="pill">{{ total }} Episoden</span>
          {% if latest.watched_on %}<span class="muted">zuletzt gesehen: {{ latest.watched_on }}</span>{% endif %}
          {% if latest.imdb %} Â· <a href="https://www.imdb.com/title/{{ latest.imdb }}/" target="_blank" rel="noopener">IMDb</a>{% endif %}
          {% if latest.tmdb %} Â· <a href="https://www.themoviedb.org/tv/{{ latest.tmdb }}" target="_blank" rel="noopener">TMDB</a>{% endif %}
        </div>
      </div>
    </div>

    <details>
      <summary>Episoden anzeigen</summary>
      <div class="episodes">
        <ul>
        {% for ep in list %}
          <li>
            S{{ ep.season | prepend: "0" | slice: -2 }},E{{ ep.episode | prepend: "0" | slice: -2 }}
            {% if ep.watched_on %}â€“ gesehen am {{ ep.watched_on }}{% endif %}
            {% if ep.episode_still %} Â· <a href="{{ ep.episode_still }}" target="_blank" rel="noopener">Still</a>{% endif %}
          </li>
        {% endfor %}
        </ul>
      </div>
    </details>
  </section>
{% endfor %}
</div>

<script>
(function(){
  const q=document.getElementById('q');
  const items=[...document.querySelectorAll('#shows .show')];
  const count=document.getElementById('count');

  function apply(){
    const term=(q.value||'').trim().toLowerCase();
    let visible=0;
    for(const el of items){
      const hit=(!term || el.dataset.title.includes(term));
      el.style.display=hit?'':'none';
      if(hit) visible++;
    }
    count.textContent = visible + ' Serien';
  }
  q.addEventListener('input', apply);
  apply();
})();
</script>
